{% extends 'base.html' %} {% block title %}Reports - Organization Management{%
endblock %} {% block content %}
<div class="content-header">
  <div class="d-flex justify-content-between align-items-center">
    <div>
      <h1><i class="fas fa-chart-bar"></i> Reports & Analytics</h1>
      <p class="text-muted">View and export business data</p>
    </div>
    <div>
      <a href="{% url 'export_excel' %}" class="btn btn-success">
        <i class="fas fa-file-excel"></i> Export All Data to Excel
      </a>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header bg-primary text-white">
        <i class="fas fa-chart-pie"></i> Expense Breakdown by Category
      </div>
      <div class="card-body">
        {% if monthly_expenses %}
        <table class="table">
          <thead>
            <tr>
              <th>Category</th>
              <th>Total Amount</th>
            </tr>
          </thead>
          <tbody>
            {% for expense in monthly_expenses %}
            <tr>
              <td>{{ expense.category|title }}</td>
              <td class="text-danger">
                <strong>${{ expense.total|floatformat:2 }}</strong>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% else %}
        <p class="text-muted">No expense data available for this year.</p>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card">
      <div class="card-header bg-success text-white">
        <i class="fas fa-money-bill-wave"></i> Payment Statistics
      </div>
      <div class="card-body">
        <table class="table">
          <tbody>
            <tr>
              <td><strong>Pending Payments</strong></td>
              <td>
                <span class="badge bg-warning"
                  >{{ payment_stats.pending }}</span
                >
              </td>
            </tr>
            <tr>
              <td><strong>Completed Payments</strong></td>
              <td>
                <span class="badge bg-success"
                  >{{ payment_stats.completed }}</span
                >
              </td>
            </tr>
            <tr>
              <td><strong>Overdue Payments</strong></td>
              <td>
                <span class="badge bg-danger">{{ payment_stats.overdue }}</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="row mt-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header bg-info text-white">
        <i class="fas fa-download"></i> Export Options
      </div>
      <div class="card-body">
        <h5>Available Export Formats</h5>
        <p>
          Click the button below to export all your data to Excel format. The
          export includes:
        </p>
        <ul>
          <li><i class="fas fa-check text-success"></i> All Employees</li>
          <li><i class="fas fa-check text-success"></i> All Customers</li>
          <li><i class="fas fa-check text-success"></i> Complete Inventory</li>
          <li><i class="fas fa-check text-success"></i> All Expenses</li>
          <li><i class="fas fa-check text-success"></i> All Payments</li>
        </ul>
        <a href="{% url 'export_excel' %}" class="btn btn-success btn-lg">
          <i class="fas fa-file-excel"></i> Download Excel Report
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
